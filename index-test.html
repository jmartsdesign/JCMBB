<!doctype html>
<html lang="en">
    <!-- Codigo inicial gerado automaticamente by AFRAME Exporter for Blender - https://silverslade.itch.io/a-frame-blender-exporter
    MIT License: https://github.com/silverslade/aframe_blender_exporter/blob/master/LICENSE 
    Modificado e adptado por Jorge Antunes-->

    <head>
        <title>Jardim CMBB</title>
        <link rel="icon" type="image/png" href="favicon.ico" />
        <meta name="description" content="3D Application" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@v7.4.0/dist/aframe-extras.min.js"></script>

          <script>
      AFRAME.registerComponent("cloak", {

          setRenderOrder: function(el, order) {
              let mesh = el.getObject3D('mesh')
              let _this = this;
              if (!mesh) {
                  el.addEventListener('model-loaded', function(){
                      _this.setRenderOrder(el, order);
                  });
                  return
              }
              console.log("setting render order on ", el, "to ", order)
              mesh.renderOrder = order;
          },
        init: function () {
          console.log("Setting cloak");
          let cloak = this.el;

             console.log("Cloak loaded")
              let mesh = cloak.getObject3D("mesh"); // grab the mesh
              if (mesh === undefined) {
                  console.log("no mesh");
                  return;
              } // return if no mesh :(
              mesh.traverse(function (node) {
                  // traverse through and apply settings
                  if (node.isMesh && node.material) {
                      // make sure the element can be a cloak
                      console.log(node);
                      node.material.colorWrite = false;
                      node.material.needsUpdate = true;
                  }
              });
              mesh.renderOrder = 1;
              console.log(cloak.children)
              for (const child of cloak.children) {
                    this.setRenderOrder(child, 11);

              }




        },
      });
    </script>

        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>

    <body>
        <a-scene
            cursor="rayOrigin:mouse"
            raycaster="objects: .clickable"
           >


            <!-- Assets ------------------------------------------------->
            <a-assets>
                <!--Elementos 3D -->
                <a-asset-item id="JCMBB3D" src="./assets/JCMBB3D.glb"></a-asset-item>
                <a-asset-item id="PalcoEmblema" src="./assets/CenaNE--Anima-V1-2-2.glb"></a-asset-item>
                <a-asset-item id="EntradaCMBB" src="./assets/e-Entrada360-v1.glb"></a-asset-item>
                <a-asset-item id="BaseMovimento" src="./assets/Base-Movimento-e360.glb"></a-asset-item>

                <!--imagem cenários 360 -->
                <img id="EntradaCMBB360" crossorigin="anonymous" src="./assets/Entrada_CMBB360-01.jpg" />
                <img id="SkyJardimCMBB" crossorigin="anonymous" src="./assets/sky.jpg" />

                <!--imagems dos paineis informativo -->
                <img id="infopanel" crossorign="anonymous" src="./assets/PainelNFO.png" />
                <img id="infopanel-anjos" crossorigin="anonymous" src="./assets/infopanel-anjos.png" />

                <!--imagems dos paineis Emblemas -->
                <img id="PainelCordis-1" crossorign="anonymous" src="./assets/PaineisInfo/P1.png" />
                <img id="PainelCordis-2" crossorign="anonymous" src="./assets/PaineisInfo/P2.png" />
                <img id="PainelCordis-3" crossorign="anonymous" src="./assets/PaineisInfo/P3.png" />
                <img id="PainelCordis-4" crossorign="anonymous" src="./assets/PaineisInfo/P4.png" />
                <img id="PainelCordis-5" crossorign="anonymous" src="./assets/PaineisInfo/P5.png" />
                <img id="PainelCordis-6" crossorign="anonymous" src="./assets/PaineisInfo/P6.png" />
                <img id="PainelCordis-7" crossorign="anonymous" src="./assets/PaineisInfo/P7.png" />
                <img id="PainelCordis-8" crossorign="anonymous" src="./assets/PaineisInfo/P8.png" />
                <img id="PainelCordis-9" crossorign="anonymous" src="./assets/PaineisInfo/P9.png" />
                <img id="PainelCordis-10" crossorign="anonymous" src="./assets/PaineisInfo/P10.png" />

                <!-- Audio -->
                <audio id="SoundP1" src="./assets/NarrativaAudio/P1-2024-7-15-17-39-51.mp3"></audio>
                <audio id="SoundP2" src="./assets/NarrativaAudio/P2-2024-7-18-16-28-22.mp3"></audio>
                <audio id="SoundP3" src="./assets/NarrativaAudio/P3-2024-7-18-16-29-37.mp3"></audio>
                <audio id="SoundP4" src="./assets/NarrativaAudio/P4-2024-7-18-16-32-39.mp3"></audio>
                <audio id="SoundP5" src="./assets/NarrativaAudio/P5-2024-7-18-16-34-12.mp3"></audio>
                <audio id="SoundP6" src="./assets/NarrativaAudio/P6-2024-7-18-16-39-22.mp3"></audio>
                <audio id="SoundP7" src="./assets/NarrativaAudio/P7-2024-7-18-15-49-23.mp3"></audio>
                <audio id="SoundP8" src="./assets/NarrativaAudio/P8-2024-7-18-15-51-19.mp3"></audio>
                <audio id="SoundP9" src="./assets/NarrativaAudio/P9-2024-7-18-15-53-57.mp3"></audio>
                <audio id="SoundP10" src="./assets/NarrativaAudio/P10-2024-7-18-15-56-26.mp3"></audio>

                <img
                    id="arrow"
                    src="https://cdn.glitch.com/80978ab7-9db6-45ae-bc43-4fab16bdbb6e%2Farrow.png?v=1589495753054" />
            </a-assets>

            <!-- Entities ----------------------------------------------->
    <a-sky color="blue"></a-sky>

            <!-- Entrada CMBB 360 -->
            <a-sphere
                    cloak
                    radius="5"
                    position="-14.5 2 13"
            >
                <a-box color="red" ></a-box>
                <a-entity
                        id="EntradaCMBBe360"
                        position="14.5 -2 -13"
                        gltf-model="#EntradaCMBB"
                        scale="1 1 1"
                        visible="true"
                ></a-entity>
            </a-sphere>








        </a-scene>

    </body>
</html>

<!-- Mestrado de Design e Multimédia -->
