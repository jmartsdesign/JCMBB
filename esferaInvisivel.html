<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Esfera Texturizada Ocultando Cubo</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene>
        <a-assets>
            <img id="esfera-textura" src="/assets/Entrada_CMBB360-01.jpg">
        </a-assets>
        
                <!-- Adicionando o fundo azul -->
        <a-sky color="#0000FF"></a-sky>

        <a-entity id="esfera-e-cubo" visibility-control>
            <a-sphere id="esfera" 
                      radius="5" 
                      material="src: #esfera-textura; transparent: true; opacity: 0.9; side: back"
                      position="0 1.6 0">
            </a-sphere>
            <a-box id="cubo" color="red" position="0 1.6 0"></a-box>
        </a-entity>

        <a-camera position="0 1.6 10"></a-camera>
    </a-scene>

    <script>
        AFRAME.registerComponent('visibility-control', {
            init: function () {
                this.camera = document.querySelector('a-camera').object3D;
                this.sphere = document.querySelector('#esfera').object3D;
                this.box = document.querySelector('#cubo').object3D;
                this.sphereRadius = 5;
                this.cameraPos = new THREE.Vector3();
                this.spherePos = new THREE.Vector3();

                // Inicialmente, torne o cubo e a esfera invis√≠veis
                this.sphere.visible = false;
                this.box.visible = false;
            },
            tick: function () {
                this.camera.getWorldPosition(this.cameraPos);
                this.sphere.getWorldPosition(this.spherePos);

                var distance = this.cameraPos.distanceTo(this.spherePos);

                if (distance <= this.sphereRadius) {
                    this.sphere.visible = true;
                    this.box.visible = true;
                } else {
                    this.sphere.visible = false;
                    this.box.visible = false;
                }
            }
        });
    </script>
</body>
</html>